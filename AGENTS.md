This file defines operating instructions for coding agents in this repository.

## 目的
- このプロジェクトは `{プロダクト名を入力}`です。
- 主機能は{主な機能を入力}です。
- 本ドキュメントの目的は、実装現状に一致した最小限かつ実用的な作業規約を提供することです。
- 仕様の一次情報は実装コードです。古い文書よりコードを優先します。

## 適用範囲と優先順位
- `AGENTS.md` は実装・仕様に関する共通規約の正本です。
- `CLAUDE.md` は Claude Code の司令塔運用（委譲・レビュー手順）の正本です。
- 実装判断で矛盾した場合は、`実装コード` → `AGENTS.md` の順で優先します。
- Claude専用の運用手順は `CLAUDE.md` を参照します。

## 会話ルール
- 返信・進捗報告・最終報告は常に日本語で行います。
- 変更前に「何を直すか」を短く共有し、変更後に結果と検証内容を明示します。
- 推測が含まれる場合は仮定として明示し、確認した事実と分けて記述します。
- 実行できなかった検証（時間不足、環境不足など）は必ず理由付きで報告します。

## 開発原則
- 開発段階のため、後方互換性より設計の単純性を優先します。
- breaking change は許容します。旧実装への過剰な互換レイヤーは追加しません。
- 複雑なフォールバックや使われていないコードは積極的に削除します。
- API変更時は、実装・型・ドキュメントを同一ターンで揃えます。
- ユーザーが明示的に求めない限り、破壊的なGit操作（`reset --hard` など）は行いません。

整合性ルール:
1. 実装と文書が矛盾したら、まず実装を確認し、文書を更新して一致させる。
2. OpenAPIに関わる変更は `npm run codegen` を前提に扱う。
3. 生成ファイルを手編集しない（必要なら生成元を修正する）。

## 変更フロー
1. 対象機能の実装箇所・型・API定義を確認する。
2. 変更設計を最小単位に分割し、影響範囲（UI/Backend/API/設定）を明確化する。
3. 実装を変更する。
4. 必要な生成・検証コマンドを実行する。
5. 変更差分を自己レビューし、古い説明・未使用コード・不要分岐を除去する。
6. 最終報告では「変更ファイル」「挙動への影響」「実行した検証」「未実施項目」を示す。

## 最小コマンド
日常開発で使う最小セット:

```bash
{よく使うコマンドを入力}
```

## テスト実行規約
{環境に適したテスト実行手順を入力}

推奨手順:
```bash
{docker, pytestのpathなどを指定したコマンドを入力}
```

実務ルール:
- 変更に近いテストを優先し、必要に応じて対象を絞る（`-k`, 単一ファイル, 単一テスト）。
- テスト未実行で提出する場合は、未実行理由と想定リスクを報告する。

## 外部ライブラリ調査規約
- 外部ライブラリを使う実装前に、最新APIを確認してからコードを書く。
- 特に更新頻度が高い領域は毎回確認する。

必須確認項目:
1. APIシグネチャ（引数名・戻り値・型）
2. 非推奨/削除済みAPI
3. 現行の推奨実装パターン
4. 直近バージョンの破壊的変更

調査方針:
- 一次情報（公式ドキュメント、公式リポジトリ、公式リリースノート、context7）を優先する。
- 参考記事は補助扱いにし、公式情報で再確認する。
- 実装時は参照元を簡潔に記録し、なぜその書き方を採用したか説明可能にする。

## ドメイン注意点
{アプリケーション特有の注意点を入力}

## 更新時チェックリスト
- [ ] 返信を日本語で統一した。
- [ ] 変更内容が「単純化優先・breaking change許容」の方針に沿っている。
- [ ] すでに存在するコードと生成物の整合を取った。
- [ ] 実行した検証コマンドと未実施項目を最終報告に記載した。
